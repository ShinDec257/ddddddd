<script>
  let startTime, updatedTime, difference, timerInterval;
  let running = false;

  function updateTime() {
    updatedTime = new Date().getTime();
    startTime = localStorage.getItem("startTime"); 
    difference = updatedTime - startTime;

    let hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
    let seconds = Math.floor((difference % (1000 * 60)) / 1000);

    document.getElementById("time").innerText =
      (hours < 10 ? "0" : "") + hours + ":" +
      (minutes < 10 ? "0" : "") + minutes + ":" +
      (seconds < 10 ? "0" : "") + seconds;
  }

  document.getElementById("startBtn").onclick = function () {
    if (!running) {
      startTime = new Date().getTime();
      localStorage.setItem("startTime", startTime); // เก็บไว้
      timerInterval = setInterval(updateTime, 1000);
      running = true;
    }
  };

  document.getElementById("stopBtn").onclick = function () {
    clearInterval(timerInterval);
    running = false;
  };

  document.getElementById("resetBtn").onclick = function () {
    clearInterval(timerInterval);
    running = false;
    localStorage.removeItem("startTime"); // ลบค่า
    document.getElementById("time").innerText = "00:00:00";
  };

  // ถ้ามีเวลาเก็บอยู่ ให้เริ่มต่อทันที
  if (localStorage.getItem("startTime")) {
    running = true;
    timerInterval = setInterval(updateTime, 1000);
  }
</script>
